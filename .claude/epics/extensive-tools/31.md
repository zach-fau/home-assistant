---
name: Integration Testing + Documentation
status: open
created: 2025-10-30T22:18:30Z
updated: 2025-10-30T22:18:30Z
github: null
depends_on: [22, 23, 24, 25, 26, 27, 28, 29, 30]
parallel: false
conflicts_with: []
---

# Task 010: Integration Testing + Documentation

**Effort**: 4 hours (S)
**Dependencies**: [001, 002, 003, 004, 005, 006, 007, 008, 009] (needs ALL integrations complete)
**Parallel**: false (final validation task)
**Conflicts**: None

## Description

End-to-end integration testing, performance benchmarking, function registration validation, and comprehensive setup documentation for all APIs.

## Acceptance Criteria

- [ ] All 10 integrations registered and working
- [ ] Morning briefing end-to-end test (all components)
- [ ] Performance benchmark: briefing completes in <30 seconds
- [ ] Performance benchmark: individual queries <3 seconds (95th percentile)
- [ ] No Python syntax errors or import failures
- [ ] All function schemas valid
- [ ] Setup guides created for each API (Google, AP News, NYT, Spotify, AfterShip, Plaid)
- [ ] Example voice commands documented
- [ ] Configuration examples (minimal and power-user)
- [ ] Update `requirements.txt` with all dependencies
- [ ] User acceptance testing completed

## Files Created/Modified

- `docs/SETUP_GOOGLE_APIS.md` (new)
- `docs/SETUP_NEWS_APIS.md` (new)
- `docs/SETUP_SPOTIFY.md` (new)
- `docs/SETUP_PLAID.md` (new)
- `docs/VOICE_COMMANDS.md` (new - comprehensive list)
- `config/briefing_config.example.yaml` (new - example configs)
- `requirements.txt` (update with all new dependencies)
- `functions/__init__.py` (validate all registrations)

## Testing Plan

### 1. Function Registration Validation

**Test**: Verify all functions are registered and have valid schemas

```python
# Run from project root
python -c "
from functions import get_all_functions
functions = get_all_functions()
print(f'Registered functions: {len(functions)}')
for func in functions:
    print(f'  - {func.name}: {func.description[:50]}...')
"
```

Expected: 50+ functions registered (base + 10 integrations)

### 2. Import Validation

**Test**: Verify no Python syntax errors or import failures

```bash
python -m py_compile functions/*.py
python -c "import functions; print('All imports successful')"
```

Expected: No errors

### 3. Morning Briefing End-to-End Test

**Test**: Run complete morning briefing with all components

```python
# Test script: test_briefing_e2e.py
from functions.briefing.manager import generate_morning_briefing

briefing = generate_morning_briefing()
print(briefing)

# Verify includes:
# - Weather forecast
# - Calendar events
# - News headlines (AP + NYT)
# - Package deliveries
# - Custom categories
```

Expected output example:
```
Good morning! It's Thursday, October 30th, 2025.

Weather: Partly cloudy, high of 72°F in San Francisco.

Calendar: You have 3 events today:
- 9:00 AM: Team standup
- 2:00 PM: Product review
- 6:00 PM: Dinner with Sarah

News:
- AP: [Top 3 headlines]
- NYT: [Top 2 headlines from Tech and World sections]

Packages: You have 2 deliveries arriving today:
- New headphones from Amazon
- Book shipment from USPS
```

### 4. Performance Benchmarks

**Test**: Measure response times for key operations

```python
# Test script: benchmark.py
import time

# Test 1: Morning briefing generation time
start = time.time()
briefing = generate_morning_briefing()
duration = time.time() - start
assert duration < 30, f"Briefing took {duration}s (limit: 30s)"

# Test 2: Individual query latency (95th percentile)
queries = [
    "get_weather('San Francisco')",
    "get_calendar_events()",
    "search_news('technology')",
    "spotify_now_playing()",
    "get_package_status()",
]

latencies = []
for query in queries * 20:  # 100 total requests
    start = time.time()
    eval(query)
    latencies.append(time.time() - start)

p95 = sorted(latencies)[int(len(latencies) * 0.95)]
assert p95 < 3.0, f"P95 latency: {p95}s (limit: 3s)"
```

### 5. Function Schema Validation

**Test**: Verify all function schemas are valid JSON and follow OpenAI format

```python
import json
from functions import get_all_functions

for func in get_all_functions():
    schema = func.to_openai_schema()

    # Validate JSON structure
    assert 'name' in schema
    assert 'description' in schema
    assert 'parameters' in schema

    # Validate parameters schema
    params = schema['parameters']
    assert params['type'] == 'object'
    assert 'properties' in params

    print(f"✓ {func.name} schema valid")
```

## Documentation Requirements

### SETUP_GOOGLE_APIS.md

Contents:
- Google Cloud Console project setup
- Enable required APIs (Calendar, Gmail, Tasks)
- OAuth 2.0 credential creation
- Downloading `credentials.json`
- First-time authorization flow
- Troubleshooting common issues

### SETUP_NEWS_APIS.md

Contents:
- AP News API key registration
- NYT API key registration (Article Search API)
- Adding keys to `.env`
- Rate limits and best practices
- Testing API access

### SETUP_SPOTIFY.md

Contents:
- Spotify Developer Dashboard setup
- Create app and get client ID/secret
- Configure redirect URIs
- Authorization flow walkthrough
- Device selection tips
- Troubleshooting playback issues

### SETUP_PLAID.md

Contents:
- Plaid account creation
- Sandbox vs Production environments
- Getting API credentials
- Security best practices
- Privacy controls configuration
- Supported institutions
- Token management

### VOICE_COMMANDS.md

Comprehensive list organized by category:

```markdown
# Voice Commands Reference

## Weather
- "What's the weather today?"
- "Will it rain tomorrow?"
- "What's the forecast for this week?"

## Calendar
- "What's on my calendar today?"
- "Do I have any meetings this afternoon?"
- "Add an event: Lunch with John tomorrow at noon"

## Tasks
- "Add task: Buy groceries"
- "What are my tasks for today?"
- "Mark 'Buy groceries' as complete"

## Email
- "Do I have any new emails?"
- "Send an email to john@example.com"

## News
- "What's the latest news?"
- "Give me tech news"
- "Show me headlines about artificial intelligence"

## Music (Spotify)
- "Play some focus music"
- "What's playing?"
- "Skip this song"
- "Turn up the volume"

## Packages
- "Where's my package?"
- "Do I have any deliveries today?"
- "Track package [tracking number]"

## Finance (Plaid)
- "What's my checking account balance?"
- "Show me recent transactions"
- "How much did I spend at Amazon?"

## Morning Briefing
- "Give me my morning briefing"
- "What's my day look like?"
```

### briefing_config.example.yaml

Provide example configurations:

```yaml
# Minimal configuration
briefing:
  enabled_sections:
    - weather
    - calendar
  weather:
    location: "San Francisco, CA"

---

# Power user configuration
briefing:
  enabled_sections:
    - weather
    - calendar
    - news
    - packages
    - tasks

  weather:
    location: "San Francisco, CA"
    units: fahrenheit

  news:
    sources:
      - ap_news
      - nyt
    categories:
      - technology
      - world
    max_headlines: 5

  calendar:
    max_events: 10
    show_all_day: true

  packages:
    show_delivered_days: 7
```

## Requirements.txt Update

Ensure all dependencies are included:

```txt
# Existing dependencies
openai
pipecat-ai
python-dotenv

# Google APIs
google-auth
google-auth-oauthlib
google-auth-httplib2
google-api-python-client

# News APIs
requests

# Spotify
spotipy

# Package tracking
aftership

# Finance
plaid-python

# Utilities
pyyaml
pytz
```

## User Acceptance Testing Checklist

- [ ] Install from scratch on clean machine
- [ ] Follow all setup guides
- [ ] Test each API connection
- [ ] Test all voice commands
- [ ] Verify morning briefing works
- [ ] Verify error handling (missing API keys, network failures)
- [ ] Performance meets benchmarks
- [ ] Documentation is clear and complete

## Success Criteria

All tests pass and documentation is complete. The system should be ready for daily use with:
- Fast response times (<30s briefing, <3s queries)
- Reliable error handling
- Clear setup instructions
- Comprehensive voice command support
