---
name: Productivity Toolkit Implementation
status: open
created: 2025-10-28T20:51:52Z
updated: 2025-10-28T21:06:48Z
github: https://github.com/zach-fau/home-assistant/issues/9
depends_on: [6]
parallel: true
conflicts_with: []
---

# Task: Productivity Toolkit Implementation

## Description
Implement productivity-focused tools including timer/alarm system, reminder management, calendar integration, and note-taking capability. These tools enable hands-free productivity assistance for common tasks like time management, task tracking, and quick note capture.

## Acceptance Criteria
- [ ] Timer/alarm system with async scheduling working
- [ ] Reminder creation and notification system implemented
- [ ] Calendar integration for event queries and creation
- [ ] Note-taking capability with persistent storage
- [ ] All productivity functions registered with tool framework
- [ ] Natural language time parsing working ("in 5 minutes", "tomorrow at 2pm")
- [ ] Notifications delivered reliably when timers/reminders trigger
- [ ] Error handling for invalid times or scheduling conflicts

## Technical Details
**Productivity Tool Functions:**
```python
class ProductivityTools:
    """Collection of productivity-related functions"""

    functions = [
        {
            "name": "set_timer",
            "description": "Set a timer for a specific duration",
            "parameters": {
                "duration_seconds": "integer",
                "label": "string (optional)"
            }
        },
        {
            "name": "create_reminder",
            "description": "Create a reminder for a specific time",
            "parameters": {
                "reminder_text": "string",
                "when": "string (time description or ISO datetime)"
            }
        },
        {
            "name": "add_calendar_event",
            "description": "Add event to calendar",
            "parameters": {
                "title": "string",
                "start_time": "string (ISO datetime or natural language)",
                "duration_minutes": "integer (optional)"
            }
        },
        {
            "name": "get_calendar_events",
            "description": "Get upcoming calendar events",
            "parameters": {
                "days_ahead": "integer (default 1)"
            }
        },
        {
            "name": "create_note",
            "description": "Save a quick note",
            "parameters": {
                "content": "string",
                "title": "string (optional)"
            }
        }
    ]
```

**Implementation Approach:**

1. **Timer/Alarm System:**
   - Use asyncio for scheduled callbacks
   - Store active timers in memory (simple dict)
   - Play audio notification or speak alert when timer completes
   - Support canceling active timers

2. **Reminder System:**
   - Parse natural language time descriptions ("tomorrow at 2pm", "in 30 minutes")
   - Use dateutil or similar for parsing
   - Store reminders in simple JSON file or SQLite
   - Background task checks for due reminders
   - Speak reminder when triggered

3. **Calendar Integration:**
   - Start with local calendar file (iCal format) or simple JSON
   - (Future) Add CalDAV integration for Google Calendar/iCloud
   - Parse event times with natural language support
   - Query upcoming events by date range

4. **Note-Taking:**
   - Store notes in simple text files or JSON
   - Timestamp and optionally title each note
   - Basic organization (by date or category)

**Time Parsing Examples:**
- "Set timer for 5 minutes" → 300 seconds
- "Remind me to call John tomorrow at 2pm" → parse to datetime
- "Add dentist appointment next Wednesday at 10am" → parse to event

**Configuration:**
```yaml
productivity:
  notes_directory: "./notes"
  calendar_file: "./calendar.ics"
  reminders_file: "./reminders.json"
  timer_sound: true
```

**Notification Strategy:**
- Timers: Audio beep + spoken message
- Reminders: Interrupt current conversation with spoken reminder
- Calendar: Proactive notifications 5-10 minutes before events

## Dependencies
- [ ] Task 003 (Function Calling Framework) completed
- [ ] Time parsing library (python-dateutil) installed

## Effort Estimate
- Size: M
- Hours: 10-14 hours
- Parallel: true (can be developed alongside other tools)

## Definition of Done
- [ ] Timer successfully triggers after specified duration
- [ ] Reminder created and delivered at correct time
- [ ] Calendar events added and queryable
- [ ] Notes saved persistently and can be retrieved
- [ ] Natural language time parsing works for common phrases
- [ ] Notifications are delivered reliably
- [ ] Multiple timers/reminders can coexist
- [ ] Error handling for past times, invalid durations
- [ ] Unit tests for each productivity function
- [ ] Integration test: Set reminder, wait for delivery
- [ ] Persistent storage survives app restarts
