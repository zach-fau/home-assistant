---
name: Additional Integrations (Optional)
status: open
created: 2025-10-29T21:30:40Z
updated: 2025-10-29T21:30:40Z
github: null
depends_on: [001, 002, 003, 004, 005, 006]
parallel: false
conflicts_with: []
---

# Task: Additional Integrations (Optional)

## Description

Expand Alex's capabilities with additional tool integrations based on priorities and user needs. Options include weather API, news feed, calendar integration, note-taking, music control, or other high-value use cases. This task is optional and can be tailored to specific requirements.

**Key Outcome:** Alex has 10+ working tools covering the most common daily tasks and information needs.

## Acceptance Criteria

- [ ] 2-3 additional integrations implemented
- [ ] Each integration has proper function schema
- [ ] Functions registered in `register_all_functions()`
- [ ] Voice responses are natural and useful
- [ ] Error handling consistent with existing tools
- [ ] Total function count reaches 10+
- [ ] Multi-step workflows possible (e.g., "good morning" routine)
- [ ] Tested with real-world usage scenarios

## Technical Details

### Potential Integration Options

#### 1. Weather API (OpenWeatherMap / WeatherAPI.com)
**Use Case:** "Alex, what's the weather?" / "Will it rain today?"

**Implementation:**
```python
# functions/weather.py
async def get_weather_handler(location: str = None):
    """Get current weather and forecast"""
    # Use IP-based location if not provided
    # Return temperature, conditions, forecast
    pass
```

**Value:** High - frequently asked
**Effort:** 2-3 hours
**API:** Free tier available

#### 2. News Headlines (NewsAPI)
**Use Case:** "Alex, what's in the news?" / "Tech news today?"

**Implementation:**
```python
# functions/news.py
async def get_news_handler(category: str = "general", count: int = 5):
    """Get latest news headlines"""
    # Categories: general, tech, business, sports, etc.
    pass
```

**Value:** Medium - nice to have
**Effort:** 2 hours
**API:** Free tier available

#### 3. Google Calendar Integration
**Use Case:** "Alex, what's on my calendar?" / "Add meeting to my calendar"

**Implementation:**
```python
# functions/google_calendar.py
async def list_events_handler(days: int = 1):
    """List calendar events"""
    pass

async def create_event_handler(title: str, start_time: str, duration: int):
    """Create calendar event"""
    pass
```

**Value:** High - productivity boost
**Effort:** 4-5 hours (similar to Tasks)
**API:** Google Calendar API (OAuth required)

#### 4. Timer / Reminder
**Use Case:** "Alex, set a timer for 10 minutes" / "Remind me in 1 hour"

**Implementation:**
```python
# functions/timers.py
async def set_timer_handler(duration_minutes: int, label: str = None):
    """Set a countdown timer"""
    # Use asyncio to wait, then trigger TTS notification
    pass
```

**Value:** High - very useful
**Effort:** 3-4 hours
**API:** None (local implementation)

#### 5. Note Taking
**Use Case:** "Alex, take a note: ..." / "What were my notes today?"

**Implementation:**
```python
# functions/notes.py
async def create_note_handler(content: str, title: str = None):
    """Create a text note"""
    # Store in local file or Google Keep API
    pass
```

**Value:** Medium - useful but tasks cover most use cases
**Effort:** 2-3 hours
**API:** Local file or Google Keep

#### 6. Music Control (Spotify / Music Player)
**Use Case:** "Alex, play my focus playlist" / "Pause music"

**Implementation:**
```python
# functions/music.py
async def control_music_handler(action: str, query: str = None):
    """Control music playback"""
    # Actions: play, pause, skip, volume
    pass
```

**Value:** Medium - entertainment
**Effort:** 4-6 hours
**API:** Spotify API (OAuth) or local player control

#### 7. System Commands
**Use Case:** "Alex, lock my computer" / "Take a screenshot"

**Implementation:**
```python
# functions/system.py
async def system_command_handler(command: str):
    """Execute system commands"""
    # lock, screenshot, volume, brightness, etc.
    # SECURITY: Whitelist allowed commands
    pass
```

**Value:** Medium - convenience
**Effort:** 2-3 hours
**API:** None (OS-level commands)

### Recommended Priority

**Phase 3A (High Value):**
1. Weather API - 2-3 hours
2. Timer/Reminder - 3-4 hours
3. Google Calendar - 4-5 hours

**Phase 3B (Nice to Have):**
4. News Headlines - 2 hours
5. Note Taking - 2-3 hours
6. System Commands - 2-3 hours

**Phase 3C (Lower Priority):**
7. Music Control - 4-6 hours

### Implementation Pattern

For each new integration, follow this pattern:

**1. Create Module File:**
```python
# functions/new_integration.py
import logging
from pipecat.services.openai import FunctionSchema

logger = logging.getLogger(__name__)

async def handler_function(params):
    """Handler implementation"""
    try:
        # Implementation
        return {"success": True, "message": "..."}
    except Exception as e:
        logger.error(f"Error: {e}")
        return {"success": False, "message": "..."}

def create_schema():
    return FunctionSchema(
        name="function_name",
        description="Clear description for LLM",
        parameters={...}
    )

def register_functions(llm, tts):
    llm.register_function("function_name", handler_function, schema=create_schema())
```

**2. Update Registration:**
```python
# functions/__init__.py
def register_all_functions(llm, tts):
    # ... existing registrations ...
    from .new_integration import register_functions as register_new
    register_new(llm, tts)
```

**3. Add Configuration:**
- Update .env with API keys
- Add any config files needed
- Update .gitignore if needed

**4. Test Thoroughly:**
- Manual testing with voice commands
- Error cases
- Integration with existing functions

### Multi-Step Workflows

With 10+ functions, enable complex workflows:

**"Good Morning" Routine:**
1. Get weather forecast
2. Read calendar for today
3. Get news headlines
4. Turn on lights

**"Good Night" Routine:**
1. Turn off all lights
2. Set alarm (timer)
3. Check tomorrow's calendar
4. Lock system

**"Focus Mode":**
1. Play focus music
2. Turn on desk light to bright
3. Set timer for 25 minutes (Pomodoro)
4. Silence notifications (system command)

## Dependencies

### External Dependencies
- API keys for chosen integrations
- OAuth setup for Google services (if adding Calendar)
- Python packages for each API

### Blocked By
- Task 001 (Function Calling Framework) - complete
- Task 002 (Home Assistant) - complete
- Task 003 (Error Handling) - complete
- Task 004 (Google OAuth) - complete
- Task 005 (Google Tasks) - complete
- Task 006 (Web Search) - complete

### Blocks
- None (optional enhancement)

## Effort Estimate

- **Size:** L (Large) - but flexible based on chosen integrations
- **Hours:** 10-20 hours (depends on number of integrations)
- **Parallel:** false (should complete core features first)

**Breakdown (for 3 integrations):**
- Weather API: 3 hours
- Timer/Reminder: 4 hours
- Calendar: 5 hours
- Multi-step workflow logic: 3 hours
- Testing and refinement: 5 hours

## Definition of Done

- [ ] All acceptance criteria met
- [ ] 2-3 additional integrations working
- [ ] Total function count â‰¥10
- [ ] Each integration tested with real usage
- [ ] Error handling consistent with existing tools
- [ ] Voice responses natural and useful
- [ ] Documentation updated with new functions
- [ ] Optional: Multi-step workflows implemented
- [ ] No performance degradation with more functions

## Notes

- **Prioritize by Value:** Focus on integrations you'll actually use daily
- **API Costs:** Prefer free tiers, monitor usage
- **Complexity:** Start with simpler integrations (Weather, Timer) before complex ones (Music, Calendar)
- **LLM Context:** With 10+ functions, monitor if LLM gets confused about which function to call
- **Testing:** More functions = more edge cases, test combinations
- **Performance:** Each integration adds ~1-2 functions, shouldn't significantly impact response time
- **Future:** Can always add more integrations later as needs arise
- **Maintenance:** More integrations = more API keys to manage, more potential breakage
